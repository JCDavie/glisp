!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=37)}([function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"m",(function(){return o})),n.d(t,"h",(function(){return a})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"k",(function(){return _})),n.d(t,"l",(function(){return f})),n.d(t,"i",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"j",(function(){return b})),n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return y})),n.d(t,"o",(function(){return g})),n.d(t,"I",(function(){return v})),n.d(t,"p",(function(){return m})),n.d(t,"w",(function(){return w})),n.d(t,"B",(function(){return M})),n.d(t,"C",(function(){return j})),n.d(t,"u",(function(){return P})),n.d(t,"L",(function(){return x})),n.d(t,"J",(function(){return k})),n.d(t,"r",(function(){return A})),n.d(t,"v",(function(){return C})),n.d(t,"t",(function(){return S})),n.d(t,"z",(function(){return I})),n.d(t,"D",(function(){return B})),n.d(t,"E",(function(){return T})),n.d(t,"F",(function(){return K})),n.d(t,"K",(function(){return L})),n.d(t,"x",(function(){return W})),n.d(t,"H",(function(){return q})),n.d(t,"y",(function(){return $})),n.d(t,"s",(function(){return F})),n.d(t,"G",(function(){return N})),n.d(t,"A",(function(){return V})),n.d(t,"q",(function(){return z})),n.d(t,"n",(function(){return J}));const r=Symbol.for("meta"),s=Symbol.for("ast"),i=Symbol.for("env"),o=Symbol.for("params"),a=Symbol.for("ismacro"),c=Symbol.for("islist"),u=Symbol.for("type"),l=Symbol.for("eval"),_=Symbol.for("outer"),f=Symbol.for("outer-key"),p=Symbol.for("expand"),d=Symbol("issugar"),h=Symbol.for("elmstrs"),b=Symbol.for("keys"),O=Symbol.for("delimiters"),E=Symbol.for("def");var y,m;!function(e){e[e.Constant=1]="Constant",e[e.Env=2]="Env",e[e.Unchange=3]="Unchange"}(y||(y={}));class g extends Error{}function v(e,t){e[p]=t}function w(e){switch(typeof e){case"object":if(null===e)return m.Nil;if(Array.isArray(e)){return e[c]?m.List:m.Vector}return e instanceof Float32Array?m.Vector:e[u]===m.Symbol?m.Symbol:e[u]===m.Atom?m.Atom:m.Map;case"function":return e[a]?m.Macro:m.Function;case"string":switch(e[0]){case U:return m.Keyword;default:return m.String}case"number":return m.Number;case"boolean":return m.Boolean;default:return m.Undefined}}!function(e){e.List="list",e.Vector="vector",e.Map="map",e.Number="number",e.String="string",e.Boolean="boolean",e.Nil="nil",e.Symbol="symbol",e.Keyword="keyword",e.Atom="atom",e.Function="fn",e.Macro="macro",e.Undefined="undefined"}(m||(m={}));const M=e=>{const t=w(e);return t===m.List||t===m.Map||t===m.Vector},j=e=>{const t=w(e);return t===m.List||t===m.Vector};function P(e){return e instanceof Object&&r in e?e[r]:null}const D=new Set([m.Function,m.Macro,m.List,m.Vector,m.Map]);function x(e,t){if(void 0===t)throw new g("[with-meta] Need the metadata to attach");if(!D.has(w(e)))throw new g("[with-meta] Object should not be atom");const n=A(e);return n[r]=t,n}function k(e,t){if(!(e instanceof Object))throw new g("[with-meta] Object should not be atom");return e[r]=t,e}function A(e,t=!1){switch(w(e)){case m.List:return F(...t?e.map(e=>A(e,!0)):e);case m.Vector:return[...t?e.map(e=>A(e,!0)):e];case m.Map:return t?Object.fromEntries(Object.entries(e).map(([e,t])=>[e,A(t,!0)])):Object.assign({},e);case m.Function:case m.Macro:{const t=function(...t){return e.apply(this,t)};return Object.assign(t,e)}case m.Symbol:return MalList.create(e.value);default:return e}}function C(e){switch(w(e)){case m.String:return e;case m.Keyword:return e.slice(1);case m.Symbol:return e.value;default:throw new g("getName() can only extract the name by string/keyword/symbol")}}function S(e,t,n,c,u=null,l=!1){const _={[s]:t,[i]:n,[o]:c,[r]:u,[a]:l};return Object.assign(e,_)}const I=e=>!!(e instanceof Function&&e[s]),B=e=>w(e)===m.String;class R{constructor(e){this.value=e,this[u]=m.Symbol}set def(e){this[E]=e}get def(){return this[E]||null}set evaluated(e){this[l]=e}get evaluated(){return this[l]}toString(){return this.value}}const T=e=>w(e)===m.Symbol,K=(e,t)=>T(e)&&e.value===t,L=e=>new R(e),U="Êž",W=e=>w(e)===m.Keyword,q=e=>U+e,$=e=>Array.isArray(e)&&e[c];function F(...e){return e[c]=!0,e}const N=e=>Array.isArray(e)&&!e[c],V=e=>w(e)===m.Map;function z(e,...t){if(t.length%2==1)throw new g("Odd number of map arguments");for(let n=0;n<t.length;n+=2){if("string"!=typeof t[n])throw new g("Hash map can only use string/symbol/keyword as key");e[t[n]]=t[n+1]}return e}class J{constructor(e){this.value=e,this[u]=m.Atom}}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n(0);const s={log:(...e)=>{console.info(...e)},return:(...e)=>{console.log(...e)},error:(...e)=>{console.error(...e)},pseudoExecute:e=>{console.log(e)},clear:console.clear};function i(e){return 0===e?[""]:["",...Array(e-1).fill(" "),""]}const o=new Map([["quote",{prefix:"'"}],["ui-annotate",{prefix:"#@"}],["with-meta-sugar",{prefix:"^"}],["fn-sugar",{prefix:"#"}],["quasiquote",{prefix:"`"}],["unquote",{prefix:"~"}],["unquote-splicing",{prefix:"~@"}],["deref",{prefix:"@"}]]);function a(e,t=!0){const n=t,s=Object(r.w)(e);switch(s){case r.p.List:case r.p.Vector:case r.p.Map:{const t=e,c=s===r.p.List&&o.get(Object(r.E)(t[0])?t[0].value:"");if(c)t[r.i]=!0,t[r.d]=[c.prefix,...t.slice(1).map(e=>a(e,n))],t[r.c]=Array(t.length+1).fill("");else{if(!(r.d in t)){let e;Object(r.C)(t)?(e=t.map(e=>a(e,n)),c&&(e[0]="")):e=Object.entries(t).map(([e,t])=>[a(e,n),a(t,n)]).flat(),t[r.d]=e}if(!(r.c in t)){let e;e=Object(r.C)(t)?i(t.length):i(2*Object.keys(t).length),t[r.c]=e}}const u=t[r.d],l=t[r.c];let _="";for(let e=0;e<u.length;e++)_+=l[e]+u[e];switch(_+=l[l.length-1],s){case r.p.List:return c?_:"("+_+")";case r.p.Vector:return"["+_+"]";default:return"{"+_+"}"}}case r.p.Number:return e.toString().replace(/(\.[0-9]{4})([0-9]+)$/,"$1");case r.p.String:return n?'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e;case r.p.Boolean:return e.toString();case r.p.Nil:return"nil";case r.p.Symbol:return e.value;case r.p.Keyword:return":"+e.slice(1);case r.p.Atom:return`(atom ${a(e.value,n)})`;case r.p.Function:case r.p.Macro:if(r.b in e){return`(${s} ${a(e[r.m],n)} ${a(e[r.b],n)})`}return"<JS Function>";default:return"<undefined>"}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return O}));var r=n(0);n(2);const s=Object(r.K)("quote"),i=Object(r.K)("quasiquote"),o=Object(r.K)("unquote"),a=Object(r.K)("splice-unquote"),c=Object(r.K)("fn-sugar"),u=Object(r.K)("with-meta-sugar"),l=Object(r.K)("ui-annotate"),_=Object(r.K)("deref");class f{constructor(e,t){this.tokens=[...e],this.str=t,this.strlen=t.length,this._index=0}next(){const e=this.tokens[this._index++];return Array.isArray(e)?e[0]:e}peek(e=this._index){const t=this.tokens[e];return Array.isArray(t)?t[0]:t}get index(){return this._index}getStr(e,t){return this.str.slice(e,t)}offset(e=this._index){const t=this.tokens[e];return void 0!==t?t[1]:this.strlen}endOffset(e=this._index){const t=this.tokens[e];return void 0!==t?t[1]+t[0].length:this.strlen}prevEndOffset(){return this.endOffset(this._index-1)}}function p(e,t,n="[",s="]"){const i=[];let o=null,a=null,c=e.next();if(c!==n)throw new r.o(`Expected '${n}'`);t&&(o=[],a=[]);let u=0;for(;(c=e.peek())!==s;){if(!c)throw new r.o(`Expected '${s}', got EOF`);if(t){const t=e.getStr(e.prevEndOffset(),e.offset());null==a||a.push(t),u=e.offset()}if(i.push(d(e,t)),t){const t=e.getStr(u,e.prevEndOffset());null==o||o.push(t)}}if(t){const t=e.getStr(e.prevEndOffset(),e.offset());null==a||a.push(t),i[r.c]=a,i[r.d]=o}return e.next(),i}function d(e,t){let n;const f=e.index;let h=null;switch(e.peek()){case";":n=null;break;case"'":e.next(),t&&(h=[e.prevEndOffset(),e.offset()]),n=Object(r.s)(s,d(e,t));break;case"`":e.next(),t&&(h=[e.prevEndOffset(),e.offset()]),n=Object(r.s)(i,d(e,t));break;case"~":e.next(),t&&(h=[e.prevEndOffset(),e.offset()]),n=Object(r.s)(o,d(e,t));break;case"~@":e.next(),t&&(h=[e.prevEndOffset(),e.offset()]),n=Object(r.s)(a,d(e,t));break;case"#":{e.next();const s=e.peek();if("("===s)t&&(h=[e.prevEndOffset(),e.offset()]),n=Object(r.s)(c,d(e,t));else if("@"===s){e.next(),t&&(h=[e.prevEndOffset(),e.offset()]);const s=d(e,t);h&&h.push(e.prevEndOffset(),e.offset());const i=d(e,t);n=Object(r.s)(l,s,i)}else if('"'===s[0]){t&&(h=[e.prevEndOffset(),e.offset()]);const s=d(e,t);h&&h.push(e.prevEndOffset(),e.offset());const i=d(e,t);n=Object(r.s)(Object(r.K)("set-id"),s,i)}break}case"^":{e.next(),t&&(h=[e.prevEndOffset(),e.offset()]);const s=d(e,t);h&&h.push(e.prevEndOffset(),e.offset());const i=d(e,t);n=Object(r.s)(u,s,i);break}case"@":e.next(),t&&(h=[e.prevEndOffset(),e.offset()]),n=Object(r.s)(_,d(e,t));break;case")":throw new r.o("unexpected ')'");case"(":n=function(e,t){const n=p(e,t,"(",")");return n[r.g]=!0,n}(e,t);break;case"]":throw new Error("unexpected ']'");case"[":n=p(e,t);break;case"}":throw new Error("unexpected '}'");case"{":n=function(e,t){const n=p(e,t,"{","}"),s=Object(r.q)({},...n);if(t){const e=[],t=[];for(let s=0;s<n.length;s+=2)e.push(n[s]),t.push(n[r.d][s],n[r.d][s+1]);s[r.j]=e,s[r.d]=t,s[r.c]=n[r.c]}return s}(e,t);break;default:n=function(e){const t=e.next();if("string"==typeof t){if(t.match(/^[-+]?[0-9]+$/))return parseInt(t,10);if(t.match(/^[-+]?([0-9]*\.[0-9]+|[0-9]+)$/))return parseFloat(t);if(t.match(/^"(?:\\.|[^\\"])*"$/))return t.slice(1,t.length-1).replace(/\\(.)/g,(e,t)=>"n"===t?"\n":t);if('"'===t[0])throw new r.o("Expected '\"', got EOF");return":"===t[0]?Object(r.H)(t.slice(1)):"nil"===t?null:"true"===t||"false"!==t&&("NaN"===t?NaN:Object(r.K)(t))}return t}(e)}if(h){const t=e.peek(f),s=e.prevEndOffset();n[r.i]=!0;const i=[""],o=[t];h.push(s);for(let t=0;t<h.length-1;t+=2)i.push(e.getStr(h[t],h[t+1])),o.push(e.getStr(h[t+1],h[t+2]));i.push(""),n[r.c]=i,n[r.d]=o}return n}function h(e){if(Array.isArray(e)){return e.map(e=>h(e))}if(Object(r.E)(e)||e instanceof Function)return e;if(e instanceof Object){const t={};for(const[n,s]of Object.entries(e))t[Object(r.H)(n)]=h(s);return t}return e}class b extends Error{}function O(e,t=!0){const n=function(e,t=!1){const n=/[\s,]*(~@|[\[\]{}()'`~^@#]|"(?:\\.|[^\\"])*"|;.*|[^\s\[\]{}('"`,;)]*)/g;let r=null;const s=/^[\s,]*/;let i=null,o=null;const a=[];for(;(r=n.exec(e))&&""!=r[1];)";"!==r[1][0]&&(t?(i=s.exec(r[0]),o=i?i[0].length:0,a.push([r[1],r.index+o])):a.push(r[1]));return a}(e,t);if(0===n.length)throw new b;const s=new f(n,e),i=d(s,t);if(s.index<n.length-1)throw new r.o("Invalid end of file");return t&&function e(t,n,s){if(Object(r.B)(t)&&!(r.k in t)){Object(r.B)(n)&&void 0!==s&&(t[r.k]=n,t[r.l]=s),Object(r.A)(t)&&!(r.j in t)&&(t[r.j]=Object.keys(t));const i=Array.isArray(t)?t:Object(r.A)(t)?t[r.j].map(e=>t[e]):null;i&&i.forEach((n,r)=>e(n,t,r))}}(i,null),i}},,,function(e,t,n){
/*! Case - v1.6.2 - 2020-03-24
* Copyright (c) 2020 Nathan Bubna; Licensed MIT, GPL */
(function(){"use strict";var t=function(e,t){return t=t||"",e.replace(/(^|-)/g,"$1\\u"+t).replace(/,/g,"\\u"+t)},n=t("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),r="a-z"+t("DF-F6,F8-FF","00"),s="A-Z"+t("C0-D6,D8-DE","00"),i=function(e,t,i,o){return e=e||n,t=t||r,i=i||s,o=o||"A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",{capitalize:new RegExp("(^|["+e+"])(["+t+"])","g"),pascal:new RegExp("(^|["+e+"])+(["+t+i+"])","g"),fill:new RegExp("["+e+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+t+"])","g"),improper:new RegExp("\\b("+o+")\\b","g"),relax:new RegExp("([^"+i+"])(["+i+"]*)(["+i+"])(?=[^"+i+"]|$)","g"),upper:new RegExp("^[^"+t+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+e+"]")}},o=i(),a={re:o,unicodes:t,regexps:i,types:[],up:String.prototype.toUpperCase,low:String.prototype.toLowerCase,cap:function(e){return a.up.call(e.charAt(0))+e.slice(1)},decap:function(e){return a.low.call(e.charAt(0))+e.slice(1)},deapostrophe:function(e){return e.replace(o.apostrophe,"")},fill:function(e,t,n){return null!=t&&(e=e.replace(o.fill,(function(e,n){return n?t+n:""}))),n&&(e=a.deapostrophe(e)),e},prep:function(e,t,n,r){if(e=null==e?"":e+"",!r&&o.upper.test(e)&&(e=a.low.call(e)),!t&&!o.hole.test(e)){var s=a.fill(e," ");o.hole.test(s)&&(e=s)}return n||o.room.test(e)||(e=e.replace(o.relax,a.relax)),e},relax:function(e,t,n,r){return t+" "+(n?n+" ":"")+r}},c={_:a,of:function(e){for(var t=0,n=a.types.length;t<n;t++)if(c[a.types[t]].apply(c,arguments)===e)return a.types[t]},flip:function(e){return e.replace(/\w/g,(function(e){return(e==a.up.call(e)?a.low:a.up).call(e)}))},random:function(e){return e.replace(/\w/g,(function(e){return(Math.round(Math.random())?a.up:a.low).call(e)}))},type:function(e,t){c[e]=t,a.types.push(e)}},u={lower:function(e,t,n){return a.fill(a.low.call(a.prep(e,t)),t,n)},snake:function(e){return c.lower(e,"_",!0)},constant:function(e){return c.upper(e,"_",!0)},camel:function(e){return a.decap(c.pascal(e))},kebab:function(e){return c.lower(e,"-",!0)},upper:function(e,t,n){return a.fill(a.up.call(a.prep(e,t,!1,!0)),t,n)},capital:function(e,t,n){return a.fill(a.prep(e).replace(o.capitalize,(function(e,t,n){return t+a.up.call(n)})),t,n)},header:function(e){return c.capital(e,"-",!0)},pascal:function(e){return a.fill(a.prep(e,!1,!0).replace(o.pascal,(function(e,t,n){return a.up.call(n)})),"",!0)},title:function(e){return c.capital(e).replace(o.improper,(function(e,t,n,r){return n>0&&n<r.lastIndexOf(" ")?a.low.call(e):e}))},sentence:function(e,t,n){return e=c.lower(e).replace(o.sentence,(function(e,t,n){return t+a.up.call(n)})),t&&t.forEach((function(t){e=e.replace(new RegExp("\\b"+c.lower(t)+"\\b","g"),a.cap)})),n&&n.forEach((function(t){e=e.replace(new RegExp("(\\b"+c.lower(t)+"\\. +)(\\w)"),(function(e,t,n){return t+a.low.call(n)}))})),e}};for(var l in u.squish=u.pascal,c.default=c,u)c.type(l,u[l]);var _="function"==typeof _?_:function(){};_(e.exports?e.exports=c:this.Case=c)}).call(this)},function(e,t,n){"use strict";e.exports=!("undefined"==typeof process||!process.versions||!process.versions.node)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),s=n(13);class i{constructor(e=null,t,n,r="let"){this.outer=e,this.name=r,this.data=new Map,this.defs=new Map,this.root===this&&(this.bindings=[]),n&&(this.exps=n),t&&n&&this.bindAll(t,n)}get root(){return this.outer?this.outer.root:this}getAllSymbols(){const e=this.outer?new Map(Object.assign(Object.assign({},this.outer.data),this.data)):this.data;return Array.from(e.keys()).map(e=>Object(r.K)(e))}bindAll(e,t){if(Object(r.E)(e))this.set(e,t);else for(let n=0;n<e.length;n++){const i=e[n],o=t[n],a=Object(r.w)(i);if(a===r.p.Symbol&&"&"===i.value){this.set(e[n+1],t.slice(n));break}switch(a){case r.p.Symbol:if(void 0===o)throw new r.o(`[${this.name}] parameter '${i}' is not specified`);this.set(i,o);break;case r.p.Vector:if(!Object(r.C)(o))throw new r.o(`[${this.name}] The destruction parameter ${Object(s.a)(i,!0)} is not specified as sequence`);this.bindAll(i,o);break;case r.p.Map:{if(!Object(r.A)(o))throw new r.o(`[${this.name}] The destruction parameter '${Object(s.a)(i,!0)}'} is not specified as map`);const e=Object.entries(i),t=[],n=[];for(const[s,i]of e){if(!(s in o))throw new r.o(`[${this.name}] The destruction keyword :${s.slice(1)} does not exist on the parameter`);t.push(i),n.push(o[s])}this.bindAll(t,n);break}default:throw new r.o(`[${this.name}] Invalid bind expression`)}}}set(e,t,n){return this.data.set(e.value,t),n&&this.defs.set(e.value,n),t}getDef(e){return this.defs.has(e.value)?this.defs.get(e.value):null!==this.outer?this.outer.getDef(e):null}find(e){const t=this.root.bindings;if(t.length>0){const n=t[t.length-1].find(e);if(void 0!==n)return n}if(this.data.has(e.value))return this.data.get(e.value);let n;return"%"===e.value[0]&&this.exps&&this.exps.length>=(n=parseInt(e.value.slice(1))-1||0)?this.exps[n]:null!==this.outer?this.outer.find(e):void 0}hasOwn(e){return this.data.has(e.value)}get(e){const t=this.find(e);if(void 0===t)throw new r.o(`[${this.name}] Symbol ${e} not found`);return t}getChain(){let e=this;const t=[...this.root.bindings.reverse()];do{t.push(e),e=e.outer}while(e);return t}setOuter(e){this.outer=e}pushBinding(e){const t=this.root.bindings,n=t.length>0?t[t.length-1]:null;return e.name="binding",e.outer=n,t.push(e),e}popBinding(){this.root.bindings.pop()}}},,function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},,function(e,t,n){"use strict";n(3);var r=n(2);n.d(t,"a",(function(){return r.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(0),s=n(8),i=n(13),o=n(6);const a=Object(r.K)("def"),c=Object(r.K)("defvar"),u=Object(r.K)("let"),l=Object(r.K)("binding"),_=Object(r.K)("if"),f=Object(r.K)("do"),p=Object(r.K)("fn"),d=Object(r.K)("get-all-symbols"),h=Object(r.K)("fn-params"),b=Object(r.K)("fn-sugar"),O=Object(r.K)("macro"),E=Object(r.K)("macroexpand"),y=Object(r.K)("quote"),m=Object(r.K)("quasiquote"),g=Object(r.K)("try"),v=Object(r.K)("catch"),w=Object(r.K)("concat"),M=Object(r.K)("eval*"),j=Object(r.K)("lst");function P(e){if(Object(r.A)(e)){const t={};for(const[n,r]of Object.entries(e))t[n]=P(r);return t}if(!n(e))return Object(r.s)(y,e);if(Object(r.F)(e[0],"unquote"))return e[1];let t=Object(r.s)(w,...e.map(e=>n(e)&&Object(r.F)(e[0],"splice-unquote")?e[1]:[P(e)]));return t=Object(r.y)(e)?Object(r.s)(j,t):t,t;function n(e){return Object(r.C)(e)&&e.length>0}}function D(e,t,n){let s=e;for(;Object(r.y)(s)&&Object(r.E)(s[0])&&t.find(s[0]);){const e=t.get(s[0]);if(!Object(r.z)(e)||!e[r.h])break;s[0].evaluated=e,s=e.apply({callerEnv:t},s.slice(1))}return n&&s!==e&&Object(r.y)(e)&&Object(r.I)(e,{type:r.a.Constant,exp:s}),s}function x(e,t,n){if(Object(r.E)(e)){const r=t.get(e);if(n){const n=t.getDef(e);n&&(e.def=n),e.evaluated=r}return r}if(Array.isArray(e)){const s=e.map(e=>{const s=k.call(this,e,t,n);return n&&Object(r.B)(e)&&(e[r.f]=s),s});return n&&(e[r.f]=s),Object(r.y)(e)?Object(r.s)(...s):s}if(Object(r.A)(e)){const s={};for(const i in e){const o=k.call(this,e[i],t,n);n&&Object(r.B)(e[i])&&(e[i][r.f]=o),s[i]=o}return n&&(e[r.f]=s),s}return e}function k(e,t,n=!0){const w=e;Object(r.y)(e)&&Object(r.F)(e[0],"circumcircle")&&console.log("start");let j=0;for(;j++<1e6;){if(!Object(r.y)(e))return x.call(this,e,t,n);if(e=D(e,t,n),!Object(r.y)(e))return x.call(this,e,t,n);if(0===e.length)return null;const[j]=e;if(!Object(r.E)(j))throw new r.o(`${Object(o.capital)(Object(r.w)(j))} ${Object(i.a)(j)} is not a function. First element of list always should be a function.`);switch(j.value){case"def":{n&&(j.evaluated=t.get(a));const[,s,i]=e;if(!Object(r.E)(s)||void 0===i)throw new r.o("Invalid form of def");const o=t.set(s,k.call(this,i,t,n));return n&&(Object(r.I)(e,{type:r.a.Unchange}),w[r.f]=o),o}case"defvar":{n&&(j.evaluated=t.get(c));const[,s,i]=e;if(!Object(r.E)(s)||void 0===i)throw new r.o("Invalid form of defvar");const o=k.call(this,i,t,n);return t.set(s,o,e),n&&(w[r.f]=o),o}case"let":{n&&(j.evaluated=t.get(u));const i=new s.a(t),[,o,...a]=e;if(!Object(r.G)(o))throw new r.o("Invalid bind-expr in let");for(let e=0;e<o.length;e+=2)i.bindAll(o[e],k.call(this,o[e+1],i,n));t=i;const c=1===a.length?a[0]:Object(r.s)(f,...a);n&&Object(r.I)(e,{type:r.a.Env,exp:c,env:i}),e=c;break}case"binding":{n&&(j.evaluated=t.get(l));const i=new s.a(void 0,void 0,void 0,"binding"),[,o,...a]=e;if(!Object(r.C)(o))throw new r.o("Invalid bind-expr in binding");for(let e=0;e<o.length;e+=2)i.bindAll(o[e],k.call(this,o[e+1],t,n));t.pushBinding(i);const c=1===a.length?a[0]:Object(r.s)(f,...a);let u;try{u=k.call(this,c,t,n)}finally{t.popBinding()}return n&&(w[r.f]=u),u}case"get-all-symbols":{const e=t.getAllSymbols();return n&&(j.evaluated=t.get(d),w[r.f]=e),e}case"fn-params":{n&&(j.evaluated=t.get(h));const s=k.call(this,e[1],t,n),i=Object(r.z)(s)?[...s[r.m]]:null;return n&&(w[r.f]=i),i}case"eval*":{n&&(j.evaluated=t.get(M));const r=k.call(this,e[1],t,n);e=k.call(this,r,this?this.callerEnv:t,n);break}case"quote":{const s=e[1];return n&&(j.evaluated=t.get(y),w[r.f]=s),s}case"quasiquote":n&&(j.evaluated=t.get(m)),e=P(e[1]);break;case"fn":{const[,,i]=e;let[,o]=e;if(Object(r.A)(o)&&(o=[o]),!Object(r.G)(o))throw new r.o("First argument of fn should be vector or map");if(void 0===i)throw new r.o("Second argument of fn should be specified");const a=Object(r.t)((function(...e){return k.call(this,i,new s.a(t,o,e),n)}),i,t,o);return n&&(j.evaluated=t.get(p),w[r.f]=a),a}case"fn-sugar":{n&&(j.evaluated=t.get(b));const i=e[1],o=Object(r.t)((function(...e){return k.call(this,i,new s.a(t,[],e),n)}),i,t,[]);return n&&(w[r.f]=o),o}case"macro":{n&&(j.evaluated=t.get(O));const[,,i]=e;let[,o]=e;if(Object(r.A)(o)&&(o=[o]),!Object(r.G)(o))throw new r.o("First argument of macro should be vector or map");if(void 0===i)throw new r.o("Second argument of macro should be specified");const a=Object(r.t)((function(...e){return k.call(this,i,new s.a(t,o,e),n)}),i,t,o);return a[r.h]=!0,n&&(w[r.f]=a),a}case"macroexpand":{n&&(j.evaluated=t.get(E));const s=D(e[1],t,n);return n&&(w[r.f]=s),s}case"try":{n&&(j.evaluated=t.get(g));const[,i,o]=e;try{const e=k.call(this,i,t,n);return n&&(w[r.f]=e),e}catch(e){let i=e;if(Object(r.y)(o)&&Object(r.F)(o[0],"catch")&&Object(r.E)(o[1])){n&&(j.evaluated=t.get(v)),e instanceof Error&&(i=e.message);const[,a,c]=o,u=k.call(this,c,new s.a(t,[a],[i]),n);return n&&(w[r.f]=u),u}throw i}}case"do":if(n&&(j.evaluated=t.get(f)),1===e.length)return null;k.call(this,e.slice(1,-1),t,n),e=e[e.length-1];break;case"if":{n&&(j.evaluated=t.get(_));const[,r,s,i]=e;e=k.call(this,r,t,n)?s:void 0!==i?i:null;break}default:{const[i,...o]=e.map(e=>k.call(this,e,t,n));if(i instanceof Function){if(n&&(j.evaluated=i),Object(r.z)(i)){t=new s.a(i[r.e],i[r.m],o,j.value),e=i[r.b];break}{const e=i.apply({callerEnv:t},o);return n&&(w[r.f]=e),e}}}}}throw new Error("Exceed the maximum TCO stacks")}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);__webpack_exports__.a={resolveJS(str){if(str.match(/\./)){const match=/^(.*)\.[^\.]*$/.exec(str);if(null===match)throw new _types__WEBPACK_IMPORTED_MODULE_0__.o("[interop.resolveJS] Cannot resolve");return[eval(match[1]),eval(str)]}return[globalThis,eval(str)]},jsToMal(e){if(null==e)return null;const t=[],n=JSON.stringify(e,(e,n)=>{if("object"==typeof n&&null!==n){if(-1!==t.indexOf(n))return;t.push(n)}return n});return JSON.parse(n)}}},function(e,t){e.exports=require("crypto")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return slurp}));var sprintf_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24),sprintf_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(sprintf_js__WEBPACK_IMPORTED_MODULE_0__),is_node__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),is_node__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(is_node__WEBPACK_IMPORTED_MODULE_1__),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_printer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2),_reader__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3),_interop__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(15);const slurp=(()=>{if(is_node__WEBPACK_IMPORTED_MODULE_1___default.a){const e=__webpack_require__(11);return t=>e.readFileSync(t,"UTF-8")}return e=>{const t=new XMLHttpRequest;if(t.open("GET",e,!1),t.send(),200!==t.status)throw new _types__WEBPACK_IMPORTED_MODULE_2__.o(`Failed to slurp file: ${e}`);return t.responseText}})();function jsEval(str){return _interop__WEBPACK_IMPORTED_MODULE_5__.a.jsToMal(eval(str.toString()))}function jsMethodCall(e,...t){const[n,r]=_interop__WEBPACK_IMPORTED_MODULE_5__.a.resolveJS(e),s=r.apply(n,t);return _interop__WEBPACK_IMPORTED_MODULE_5__.a.jsToMal(s)}const Exports=[["throw",e=>{throw new _types__WEBPACK_IMPORTED_MODULE_2__.o(e)}],["prn",(...e)=>(_printer__WEBPACK_IMPORTED_MODULE_3__.b.log(...e.map(e=>Object(_printer__WEBPACK_IMPORTED_MODULE_3__.a)(e,!0))),null)],["print-str",(...e)=>e.map(e=>Object(_printer__WEBPACK_IMPORTED_MODULE_3__.a)(e,!0)).join(" ")],["println",(...e)=>(_printer__WEBPACK_IMPORTED_MODULE_3__.b.log(...e.map(e=>Object(_printer__WEBPACK_IMPORTED_MODULE_3__.a)(e,!1))),null)],["read-string",_reader__WEBPACK_IMPORTED_MODULE_4__.c],["slurp",slurp],["js-eval",jsEval],[".",jsMethodCall],["format",(e,...t)=>Object(sprintf_js__WEBPACK_IMPORTED_MODULE_0__.vsprintf)(e,t)],["*is-node*",is_node__WEBPACK_IMPORTED_MODULE_1___default.a],["*host-language*","JavaScript"],["&",Object(_types__WEBPACK_IMPORTED_MODULE_2__.K)("&")],["def",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Defines a variable",params:[{label:"Symbol",type:"symbol"},{label:"Value",type:"any"}]}))],["defvar",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Creates a variable which can be changed by the bidirectional evaluation",params:[{label:"Symbol",type:"symbol"},{label:"Value",type:"any"}]}))],["let",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Creates a lexical scope",params:[{label:"Binds",type:"code"},{label:"Body",type:"code"}]}))],["binding",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Creates a new binding",params:[{label:"Binds",type:"code"},{label:"Body",type:"code"}]}))],["get-all-symbols",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Gets all existing symbols",params:[],return:{type:"vector"}}))],["fn-params",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Gets the list of a function parameter",params:[{label:"Function",type:"symbol"}]}))],["eval*",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Inside macro, evaluates the expression in a scope that called macro. Otherwise, executes *eval* normally",params:[{label:"Form",type:"code"}]}))],["quote",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Yields the unevaluated *form*",params:[{label:"Form",type:"code"}]}))],["quasiquote",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Quasiquote",params:[{label:"Form",type:"code"}]}))],["fn",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Defines a function",params:[{label:"Params",type:"code"},{label:"Form",type:"code"}]}))],["fn-sugar",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"syntactic sugar for (fn [] *form*)",params:[]}))],["macro",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"",params:[{label:"Param",type:"code"},{label:"Form",type:"code"}]}))],["macroexpand",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Expands the macro",params:[]}))],["try",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Try",params:[]}))],["catch",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Catch",params:[]}))],["do",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Evaluates *forms* in order and returns the value of the last",params:[Object(_types__WEBPACK_IMPORTED_MODULE_2__.K)("&"),{label:"Form",type:"code"}]}))],["if",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Evaluates *test*. If truthy, evaluates and yields *then*, otherwise, evaluates and yields *else*. If *else* is not supplied it defaults to nil",params:[{label:"Test",type:"code"},{label:"Then",type:"code"},{label:"Else",type:"code",default:null}]}))],["env-chain",Object(_types__WEBPACK_IMPORTED_MODULE_2__.J)(()=>null,Object(_reader__WEBPACK_IMPORTED_MODULE_4__.b)({doc:"Env chain",params:[]}))]];__webpack_exports__.a=Exports},,,,,function(e,t,n){"use strict";var r,s,i,o,a,c,u="win32"===process.platform,l="The current environment doesn't support interactive reading from TTY.",_=n(11),f=process.binding("tty_wrap").TTY,p=n(38),d=n(10),h={prompt:"> ",hideEchoBack:!1,mask:"*",limit:[],limitMessage:"Input another, please.$<( [)limit(])>",defaultInput:"",trueValue:[],falseValue:[],caseSensitive:!1,keepWhitespace:!1,encoding:"utf8",bufferSize:1024,print:void 0,history:!0,cd:!1,phContent:void 0,preCheck:void 0},b="none",O=!1,E=0,y="",m=[],g=!1,v=!1,w=!1;function M(e){return o.concat((t={display:"string",displayOnly:"boolean",keyIn:"boolean",hideEchoBack:"boolean",mask:"string",limit:"string",caseSensitive:"boolean"},n=[],Object.keys(t).forEach((function(r){"boolean"===t[r]?e[r]&&n.push("--"+r):"string"===t[r]&&e[r]&&n.push("--"+r,e[r].replace(/[^\w\u0080-\uFFFF]/g,(function(e){return"#"+e.charCodeAt(0)+";"})))})),n));var t,n}function j(e){var t,r,s={},c={env:process.env,encoding:e.encoding};if(i||(u?process.env.PSModulePath?(i="powershell.exe",o=["-ExecutionPolicy","Bypass","-File",__dirname+"\\read.ps1"]):(i="cscript.exe",o=["//nologo",__dirname+"\\read.cs.js"]):(i="/bin/sh",o=[__dirname+"/read.sh"])),u&&!process.env.PSModulePath&&(c.stdio=[process.stdin]),p.execFileSync){t=M(e),w&&w("execFileSync",t);try{s.input=p.execFileSync(i,t,c)}catch(e){r=e.stderr?(e.stderr+"").trim():"",s.error=new Error(l+(r?"\n"+r:"")),s.error.method="execFileSync",s.error.program=i,s.error.args=t,s.error.extMessage=r,s.error.exitCode=e.status,s.error.code=e.code,s.error.signal=e.signal}}else s=function(e,t){function r(e){var t,r,s="";for(a=a||n(39).tmpdir();;){t=d.join(a,e+s);try{r=_.openSync(t,"wx")}catch(e){if("EEXIST"===e.code){s++;continue}throw e}_.closeSync(r);break}return t}var s,o,c,f,h,b,O,y,m={},g=r("readline-sync.stdout"),v=r("readline-sync.stderr"),j=r("readline-sync.exit"),P=r("readline-sync.done"),D=n(16);(b=D.createHash("sha256")).update(""+process.pid+E+++Math.random()),y=b.digest("hex"),O=D.createDecipher("aes-256-cbc",y),s=M(e),u?(o=process.env.ComSpec||"cmd.exe",process.env.Q='"',c=["/V:ON","/S","/C","(%Q%"+o+"%Q% /V:ON /S /C %Q%%Q%"+i+"%Q%"+s.map((function(e){return" %Q%"+e+"%Q%"})).join("")+" & (echo !ERRORLEVEL!)>%Q%"+j+"%Q%%Q%) 2>%Q%"+v+"%Q% |%Q%"+process.execPath+"%Q% %Q%"+__dirname+"\\encrypt.js%Q% %Q%aes-256-cbc%Q% %Q%"+y+"%Q% >%Q%"+g+"%Q% & (echo 1)>%Q%"+P+"%Q%"]):(o="/bin/sh",c=["-c",'("'+i+'"'+s.map((function(e){return" '"+e.replace(/'/g,"'\\''")+"'"})).join("")+'; echo $?>"'+j+'") 2>"'+v+'" |"'+process.execPath+'" "'+__dirname+'/encrypt.js" "aes-256-cbc" "'+y+'" >"'+g+'"; echo 1 >"'+P+'"']),w&&w("_execFileSync",s);try{p.spawn(o,c,t)}catch(e){m.error=new Error(e.message),m.error.method="_execFileSync - spawn",m.error.program=o,m.error.args=c}for(;"1"!==_.readFileSync(P,{encoding:e.encoding}).trim(););return"0"===(f=_.readFileSync(j,{encoding:e.encoding}).trim())?m.input=O.update(_.readFileSync(g,{encoding:"binary"}),"hex",e.encoding)+O.final(e.encoding):(h=_.readFileSync(v,{encoding:e.encoding}).trim(),m.error=new Error(l+(h?"\n"+h:"")),m.error.method="_execFileSync",m.error.program=o,m.error.args=c,m.error.extMessage=h,m.error.exitCode=+f),_.unlinkSync(g),_.unlinkSync(v),_.unlinkSync(j),_.unlinkSync(P),m}(e,c);return s.error||(s.input=s.input.replace(/^\s*'|'\s*$/g,""),e.display=""),s}function P(e){var t="",n=e.display,i=!e.display&&e.keyIn&&e.hideEchoBack&&!e.mask;function o(){var t=j(e);if(t.error)throw t.error;return t.input}return v&&v(e),function(){var e,t,n;function i(){return e||(e=process.binding("fs"),t=(t=process.binding("constants"))&&t.fs&&"number"==typeof t.fs.O_RDWR?t.fs:t),e}if("string"==typeof b)if(b=null,u){if((n=function(e){var t=process.version.replace(/^\D+/,"").split("."),n=0;return(t[0]=+t[0])&&(n+=1e4*t[0]),(t[1]=+t[1])&&(n+=100*t[1]),(t[2]=+t[2])&&(n+=t[2]),n}())>=20302&&n<40204||n>=5e4&&n<50100||n>=50600&&n<60200||!process.stdin.isTTY)try{b=i().open("CONIN$",t.O_RDWR,parseInt("0666",8)),s=new f(b,!0)}catch(e){}else process.stdin.pause(),b=process.stdin.fd,s=process.stdin._handle;if(process.stdout.isTTY)r=process.stdout.fd;else{try{r=_.openSync("\\\\.\\CON","w")}catch(e){}if("number"!=typeof r)try{r=i().open("CONOUT$",t.O_RDWR,parseInt("0666",8))}catch(e){}}}else{if(process.stdin.isTTY){process.stdin.pause();try{b=_.openSync("/dev/tty","r"),s=process.stdin._handle}catch(e){}}else try{b=_.openSync("/dev/tty","r"),s=new f(b,!1)}catch(e){}if(process.stdout.isTTY)r=process.stdout.fd;else try{r=_.openSync("/dev/tty","w")}catch(e){}}}(),function(){var n,a,u,l,f,p,d,h=!e.hideEchoBack&&!e.keyIn;function E(e){return e===O||0===s.setRawMode(e)&&(O=e,!0)}if(c="",!g&&s&&("number"==typeof r||!e.display&&h)){if(e.display&&(_.writeSync(r,e.display),e.display=""),!e.displayOnly)if(E(!h)){for(l=e.keyIn?1:e.bufferSize,u=Buffer.allocUnsafe&&Buffer.alloc?Buffer.alloc(l):new Buffer(l),e.keyIn&&e.limit&&(a=new RegExp("[^"+e.limit+"]","g"+(e.caseSensitive?"":"i")));;){f=0;try{f=_.readSync(b,u,0,l)}catch(e){if("EOF"!==e.code)return E(!1),void(t+=o())}if(f>0?(p=u.toString(e.encoding,0,f),c+=p):(p="\n",c+=String.fromCharCode(0)),p&&"string"==typeof(d=(p.match(/^(.*?)[\r\n]/)||[])[1])&&(p=d,n=!0),p&&(p=p.replace(/[\x00-\x08\x0b\x0c\x0e-\x1f\x7f]/g,"")),p&&a&&(p=p.replace(a,"")),p&&(h||(e.hideEchoBack?e.mask&&_.writeSync(r,new Array(p.length+1).join(e.mask)):_.writeSync(r,p)),t+=p),!e.keyIn&&n||e.keyIn&&t.length>=l)break}h||i||_.writeSync(r,"\n"),E(!1)}else t=o()}else t=o()}(),e.print&&!i&&e.print(n+(e.displayOnly?"":(e.hideEchoBack?new Array(t.length+1).join(e.mask):t)+"\n"),e.encoding),e.displayOnly?"":y=e.keepWhitespace||e.keyIn?t:t.trim()}function D(e,t){var n=[];return function e(r){null!=r&&(Array.isArray(r)?r.forEach(e):t&&!t(r)||n.push(r))}(e),n}function x(e){return e.replace(/[\x00-\x7f]/g,(function(e){return"\\x"+("00"+e.charCodeAt().toString(16)).substr(-2)}))}function k(){var e,t,n=Array.prototype.slice.call(arguments);return n.length&&"boolean"==typeof n[0]&&(t=n.shift())&&(e=Object.keys(h),n.unshift(h)),n.reduce((function(n,r){return null==r||(r.hasOwnProperty("noEchoBack")&&!r.hasOwnProperty("hideEchoBack")&&(r.hideEchoBack=r.noEchoBack,delete r.noEchoBack),r.hasOwnProperty("noTrim")&&!r.hasOwnProperty("keepWhitespace")&&(r.keepWhitespace=r.noTrim,delete r.noTrim),t||(e=Object.keys(r)),e.forEach((function(e){var t;if(r.hasOwnProperty(e))switch(t=r[e],e){case"mask":case"limitMessage":case"defaultInput":case"encoding":(t=null!=t?t+"":"")&&"limitMessage"!==e&&(t=t.replace(/[\r\n]/g,"")),n[e]=t;break;case"bufferSize":isNaN(t=parseInt(t,10))||"number"!=typeof t||(n[e]=t);break;case"displayOnly":case"keyIn":case"hideEchoBack":case"caseSensitive":case"keepWhitespace":case"history":case"cd":n[e]=!!t;break;case"limit":case"trueValue":case"falseValue":n[e]=D(t,(function(e){var t=typeof e;return"string"===t||"number"===t||"function"===t||e instanceof RegExp})).map((function(e){return"string"==typeof e?e.replace(/[\r\n]/g,""):e}));break;case"print":case"phContent":case"preCheck":n[e]="function"==typeof t?t:void 0;break;case"prompt":case"display":n[e]=null!=t?t:""}}))),n}),{})}function A(e,t,n){return t.some((function(t){var r=typeof t;return"string"===r?n?e===t:e.toLowerCase()===t.toLowerCase():"number"===r?parseFloat(e)===t:"function"===r?t(e):t instanceof RegExp&&t.test(e)}))}function C(e,t){var n=d.normalize(u?(process.env.HOMEDRIVE||"")+(process.env.HOMEPATH||""):process.env.HOME||"").replace(/[/\\]+$/,"");return e=d.normalize(e),t?e.replace(/^~(?=\/|\\|$)/,n):e.replace(new RegExp("^"+x(n)+"(?=\\/|\\\\|$)",u?"i":""),"~")}function S(e,t){var n="(?:\\(([\\s\\S]*?)\\))?(\\w+|.-.)(?:\\(([\\s\\S]*?)\\))?",r=new RegExp("(\\$)?(\\$<"+n+">)","g"),s=new RegExp("(\\$)?(\\$\\{"+n+"\\})","g");function i(e,n,r,s,i,o){var a;return n||"string"!=typeof(a=t(i))?r:a?(s||"")+a+(o||""):""}return e.replace(r,i).replace(s,i)}function I(e,t,n){var r,s,i=[],o=-1,a=0,c="";function u(e,t){return t.length>3?(e.push(t[0]+"..."+t[t.length-1]),s=!0):t.length&&(e=e.concat(t)),e}return r=e.reduce((function(e,t){return e.concat((t+"").split(""))}),[]).reduce((function(e,r){var s,l;return t||(r=r.toLowerCase()),s=/^\d$/.test(r)?1:/^[A-Z]$/.test(r)?2:/^[a-z]$/.test(r)?3:0,n&&0===s?c+=r:(l=r.charCodeAt(0),s&&s===o&&l===a+1?i.push(r):(e=u(e,i),i=[r],o=s),a=l),e}),[]),r=u(r,i),c&&(r.push(c),s=!0),{values:r,suppressed:s}}function B(e,t){return e.join(e.length>2?", ":t?" / ":"/")}function R(e,t){var n,r,s,i={};if(t.phContent&&(n=t.phContent(e,t)),"string"!=typeof n)switch(e){case"hideEchoBack":case"mask":case"defaultInput":case"caseSensitive":case"keepWhitespace":case"encoding":case"bufferSize":case"history":case"cd":n=t.hasOwnProperty(e)?"boolean"==typeof t[e]?t[e]?"on":"off":t[e]+"":"";break;case"limit":case"trueValue":case"falseValue":r=t[t.hasOwnProperty(e+"Src")?e+"Src":e],n=B(r=t.keyIn?(i=I(r,t.caseSensitive)).values:r.filter((function(e){var t=typeof e;return"string"===t||"number"===t})),i.suppressed);break;case"limitCount":case"limitCountNotZero":n=(n=t[t.hasOwnProperty("limitSrc")?"limitSrc":"limit"].length)||"limitCountNotZero"!==e?n+"":"";break;case"lastInput":n=y;break;case"cwd":case"CWD":case"cwdHome":n=process.cwd(),"CWD"===e?n=d.basename(n):"cwdHome"===e&&(n=C(n));break;case"date":case"time":case"localeDate":case"localeTime":n=(new Date)["to"+e.replace(/^./,(function(e){return e.toUpperCase()}))+"String"]();break;default:"string"==typeof(s=(e.match(/^history_m(\d+)$/)||[])[1])&&(n=m[m.length-s]||"")}return n}function T(e){var t,n,r,s,i=/^(.)-(.)$/.exec(e),o="";if(!i)return null;for(s=(t=i[1].charCodeAt(0))<(n=i[2].charCodeAt(0))?1:-1,r=t;r!==n+s;r+=s)o+=String.fromCharCode(r);return o}function K(e){var t,n,r=new RegExp(/(\s*)(?:("|')(.*?)(?:\2|$)|(\S+))/g),s="",i=[];for(e=e.trim();t=r.exec(e);)n=t[3]||t[4]||"",t[1]&&(i.push(s),s=""),s+=n;return s&&i.push(s),i}function MalList.create(e,t){return!(!t.trueValue.length||!A(e,t.trueValue,t.caseSensitive))||(!t.falseValue.length||!A(e,t.falseValue,t.caseSensitive))&&e}function U(e){var t,n,r,s,i,o,a;function c(t){return R(t,e)}function u(t){e.display+=(/[^\r\n]$/.test(e.display)?"\n":"")+t}for(e.limitSrc=e.limit,e.displaySrc=e.display,e.limit="",e.display=S(e.display+"",c);;){if(t=P(e),n=!1,r="",e.defaultInput&&!t&&(t=e.defaultInput),e.history&&((s=/^\s*!(?:!|-1)(:p)?\s*$/.exec(t))?(i=m[0]||"",s[1]?n=!0:t=i,u(i+"\n"),n||(e.displayOnly=!0,P(e),e.displayOnly=!1)):t&&t!==m[m.length-1]&&(m=[t])),!n&&e.cd&&t)switch((o=K(t))[0].toLowerCase()){case"cd":if(o[1])try{process.chdir(C(o[1],!0))}catch(e){u(e+"")}n=!0;break;case"pwd":u(process.cwd()),n=!0}if(!n&&e.preCheck&&(t=(a=e.preCheck(t,e)).res,a.forceNext&&(n=!0)),!n){if(!e.limitSrc.length||A(t,e.limitSrc,e.caseSensitive))break;e.limitMessage&&(r=S(e.limitMessage,c))}u((r?r+"\n":"")+S(e.displaySrc+"",c))}return MalList.create(t,e)}function W(e,n,r){var s;return t.question(e,k({limitMessage:"Input valid number, please."},n,{limit:function(e){return s=r(e),!isNaN(s)&&"number"==typeof s},cd:!1})),s}function q(e,t){var n={},r={};return"object"==typeof e?(Object.keys(e).forEach((function(n){"function"==typeof e[n]&&(r[t.caseSensitive?n:n.toLowerCase()]=e[n])})),n.preCheck=function(e){var s;return n.args=K(e),s=n.args[0]||"",t.caseSensitive||(s=s.toLowerCase()),n.hRes="_"!==s&&r.hasOwnProperty(s)?r[s].apply(e,n.args.slice(1)):r.hasOwnProperty("_")?r._.apply(e,n.args):null,{res:e,forceNext:!1}},r.hasOwnProperty("_")||(n.limit=function(){var e=n.args[0]||"";return t.caseSensitive||(e=e.toLowerCase()),r.hasOwnProperty(e)})):n.preCheck=function(t){return n.args=K(t),n.hRes="function"!=typeof e||e.apply(t,n.args),{res:t,forceNext:!1}},n}function $(e,n,r){var s;return null==e&&(e="Are you sure? "),n&&!1===n.guide||!(e+="")||(e=e.replace(/\s*:?\s*$/,"")+" [y/n]: "),"boolean"==typeof(s=t.keyIn(e,k(n,{hideEchoBack:!1,limit:r,trueValue:"y",falseValue:"n",caseSensitive:!1})))?s:""}function F(e,n){var r;return n.length&&((r={})[e]=n[0]),t.setDefaultOptions(r)[e]}t._DBG_set_useExt=function(e){g=e},t._DBG_set_checkOptions=function(e){v=e},t._DBG_set_checkMethod=function(e){w=e},t._DBG_clearHistory=function(){y="",m=[]},t.setDefaultOptions=function(e){return h=k(!0,e),k(!0)},t.question=function(e,t){return U(k(k(!0,t),{display:e}))},t.prompt=function(e){var t=k(!0,e);return t.display=t.prompt,U(t)},t.keyIn=function(e,t){var n=k(k(!0,t),{display:e,keyIn:!0,keepWhitespace:!0});return n.limitSrc=n.limit.filter((function(e){var t=typeof e;return"string"===t||"number"===t})).map((function(e){return S(e+"",T)})),n.limit=x(n.limitSrc.join("")),["trueValue","falseValue"].forEach((function(e){n[e]=n[e].reduce((function(e,t){var n=typeof t;return"string"===n||"number"===n?e=e.concat((t+"").split("")):e.push(t),e}),[])})),n.display=S(n.display+"",(function(e){return R(e,n)})),L(P(n),n)},t.questionEMail=function(e,n){return null==e&&(e="Input e-mail address: "),t.question(e,k({hideEchoBack:!1,limit:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,limitMessage:"Input valid e-mail address, please.",trueValue:null,falseValue:null},n,{keepWhitespace:!1,cd:!1}))},t.questionNewPassword=function(e,n){var r,s,i,o,a,c,u,l,_,f,p=k({hideEchoBack:!0,mask:"*",limitMessage:"It can include: $<charlist>\nAnd the length must be: $<length>",trueValue:null,falseValue:null,caseSensitive:!0},n,{history:!1,cd:!1,phContent:function(e){return"charlist"===e?r.text:"length"===e?s+"..."+i:null}});for(o=S((n=n||{}).charlist?n.charlist+"":"$<!-~>",T),(isNaN(s=parseInt(n.min,10))||"number"!=typeof s)&&(s=12),(isNaN(i=parseInt(n.max,10))||"number"!=typeof i)&&(i=24),u=new RegExp("^["+x(o)+"]{"+s+","+i+"}$"),(r=I([o],p.caseSensitive,!0)).text=B(r.values,r.suppressed),a=null!=n.confirmMessage?n.confirmMessage:"Reinput a same one to confirm it: ",c=null!=n.unmatchMessage?n.unmatchMessage:"It differs from first one. Hit only the Enter key if you want to retry from first one.",null==e&&(e="Input new password: "),l=p.limitMessage;!f;)p.limit=u,p.limitMessage=l,_=t.question(e,p),p.limit=[_,""],p.limitMessage=c,f=t.question(a,p);return _},t.questionInt=function(e,t){return W(e,t,(function(e){return parseInt(e,10)}))},t.questionFloat=function(e,t){return W(e,t,parseFloat)},t.questionPath=function(e,n){var r,s="",i=k({hideEchoBack:!1,limitMessage:"$<error(\n)>Input valid path, please.$<( Min:)min>$<( Max:)max>",history:!0,cd:!0},n,{keepWhitespace:!1,limit:function(e){var t,i,o;function a(e){e.split(/\/|\\/).reduce((function(e,t){var n=d.resolve(e+=t+d.sep);if(_.existsSync(n)){if(!_.statSync(n).isDirectory())throw new Error("Non directory already exists: "+n)}else _.mkdirSync(n);return e}),"")}e=C(e,!0),s="";try{if(t=_.existsSync(e),r=t?_.realpathSync(e):d.resolve(e),!n.hasOwnProperty("exists")&&!t||"boolean"==typeof n.exists&&n.exists!==t)return s=(t?"Already exists":"No such file or directory")+": "+r,!1;if(!t&&n.create&&(n.isDirectory?a(r):(a(d.dirname(r)),_.closeSync(_.openSync(r,"w"))),r=_.realpathSync(r)),t&&(n.min||n.max||n.isFile||n.isDirectory)){if(i=_.statSync(r),n.isFile&&!i.isFile())return s="Not file: "+r,!1;if(n.isDirectory&&!i.isDirectory())return s="Not directory: "+r,!1;if(n.min&&i.size<+n.min||n.max&&i.size>+n.max)return s="Size "+i.size+" is out of range: "+r,!1}if("function"==typeof n.validate&&!0!==(o=n.validate(r)))return"string"==typeof o&&(s=o),!1}catch(e){return s=e+"",!1}return!0},phContent:function(e){return"error"===e?s:"min"!==e&&"max"!==e?null:n.hasOwnProperty(e)?n[e]+"":""}});return n=n||{},null==e&&(e='Input path (you can "cd" and "pwd"): '),t.question(e,i),r},t.promptCL=function(e,n){var r=k({hideEchoBack:!1,limitMessage:"Requested command is not available.",caseSensitive:!1,history:!0},n),s=q(e,r);return r.limit=s.limit,r.preCheck=s.preCheck,t.prompt(r),s.args},t.promptLoop=function(e,n){for(var r=k({hideEchoBack:!1,trueValue:null,falseValue:null,caseSensitive:!1,history:!0},n);!e(t.prompt(r)););},t.promptCLLoop=function(e,n){var r=k({hideEchoBack:!1,limitMessage:"Requested command is not available.",caseSensitive:!1,history:!0},n),s=q(e,r);for(r.limit=s.limit,r.preCheck=s.preCheck;t.prompt(r),!s.hRes;);},t.promptSimShell=function(e){return t.prompt(k({hideEchoBack:!1,history:!0},e,{prompt:u?"$<cwd>>":(process.env.USER||"")+(process.env.HOSTNAME?"@"+process.env.HOSTNAME.replace(/\..*$/,""):"")+":$<cwdHome>$ "}))},t.keyInYN=function(e,t){return $(e,t)},t.keyInYNStrict=function(e,t){return $(e,t,"yn")},t.keyInPause=function(e,n){null==e&&(e="Continue..."),n&&!1===n.guide||!(e+="")||(e=e.replace(/\s+$/,"")+" (Hit any key)"),t.keyIn(e,k({limit:null},n,{hideEchoBack:!0,mask:""}))},t.keyInSelect=function(e,n,r){var s=k({hideEchoBack:!1},r,{trueValue:null,falseValue:null,caseSensitive:!1,phContent:function(t){return"itemsCount"===t?e.length+"":"firstItem"===t?(e[0]+"").trim():"lastItem"===t?(e[e.length-1]+"").trim():null}}),i="",o={},a=49,c="\n";if(!Array.isArray(e)||!e.length||e.length>35)throw"`items` must be Array (max length: 35).";return e.forEach((function(e,t){var n=String.fromCharCode(a);i+=n,o[n]=t,c+="["+n+"] "+(e+"").trim()+"\n",a=57===a?97:a+1})),r&&!1===r.cancel||(i+="0",o[0]=-1,c+="[0] "+(r&&null!=r.cancel&&"boolean"!=typeof r.cancel?(r.cancel+"").trim():"CANCEL")+"\n"),s.limit=i,c+="\n",null==n&&(n="Choose one from list: "),(n+="")&&(r&&!1===r.guide||(n=n.replace(/\s*:?\s*$/,"")+" [$<limit>]: "),c+=n),o[t.keyIn(c,s).toLowerCase()]},t.getRawInput=function(){return c},t.setPrint=function(){return F("print",arguments)},t.setPrompt=function(){return F("prompt",arguments)},t.setEncoding=function(){return F("encoding",arguments)},t.setMask=function(){return F("mask",arguments)},t.setBufferSize=function(){return F("bufferSize",arguments)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Scope}));var _env__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),_reader__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_eval__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14),_repl_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(17),_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),_printer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),is_node__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7),is_node__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(is_node__WEBPACK_IMPORTED_MODULE_6__);const normalizeURL=(()=>{if(is_node__WEBPACK_IMPORTED_MODULE_6___default.a){const e=__webpack_require__(10);return(t,n)=>e.join(e.dirname(n),t)}return(e,t)=>new URL(e,t).href})();class Scope{constructor(e=null,t="repl",n=null,r=!1){this.outer=e,this.name=t,this.onSetup=n,this.cache=r,this.setup(),null===this.outer?this.initAsRepl():this.outer.inner=this}initAsRepl(){let filename;_repl_core__WEBPACK_IMPORTED_MODULE_3__.a.forEach(([e,t])=>{this.def(e,t)}),this.def("normalize-url",e=>{const t=this.var("*filename*");return normalizeURL(e,t)}),this.def("eval",e=>Object(_eval__WEBPACK_IMPORTED_MODULE_2__.a)(e,this.env)),this.def("import-js-force",url=>{const basename=this.var("*filename*"),absurl=normalizeURL(url,basename),text=Object(_repl_core__WEBPACK_IMPORTED_MODULE_3__.b)(absurl);eval(text);const exp=globalThis.glisp_library;return Object(_eval__WEBPACK_IMPORTED_MODULE_2__.a)(exp,this.env)}),filename=is_node__WEBPACK_IMPORTED_MODULE_6___default.a?"/Users/baku/Sites/glisp/repl/index.js":new URL(".",document.baseURI).href,this.def("*filename*",filename),this.readEval('(def import-force\n\t\t\t\t(fn [path]\n\t\t\t\t\t(let [url (normalize-url path)]\n\t\t\t\t\t\t(eval (read-string\n\t\t\t\t\t\t\t\t\t(format "(do (def *filename* \\"%s\\") %s \n nil)"\n\t\t\t\t\t\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t\t\t\t\t\t\t(slurp url)))))))'),this.readEval('(import-force "./lib/core.glisp")'),is_node__WEBPACK_IMPORTED_MODULE_6___default.a&&this.def("*filename*",process.cwd())}setup(e){var t;this.env=new _env__WEBPACK_IMPORTED_MODULE_0__.a(null===(t=this.outer)||void 0===t?void 0:t.env),this.env.name=this.name,this.onSetup&&e&&this.onSetup(this,e),this.inner&&this.inner.env.setOuter(this.env)}REP(e){const t=this.readEval(e);void 0!==t&&_printer__WEBPACK_IMPORTED_MODULE_5__.b.return(Object(_printer__WEBPACK_IMPORTED_MODULE_5__.a)(t))}readEval(e){try{return this.eval(Object(_reader__WEBPACK_IMPORTED_MODULE_1__.c)(e))}catch(e){return e instanceof _reader__WEBPACK_IMPORTED_MODULE_1__.a?null:void(e instanceof _types__WEBPACK_IMPORTED_MODULE_4__.o?_printer__WEBPACK_IMPORTED_MODULE_5__.b.error(e):_printer__WEBPACK_IMPORTED_MODULE_5__.b.error(e.stack))}}eval(e){try{return Object(_eval__WEBPACK_IMPORTED_MODULE_2__.a)(e,this.env,this.cache)}catch(e){return void(e instanceof _types__WEBPACK_IMPORTED_MODULE_4__.o?_printer__WEBPACK_IMPORTED_MODULE_5__.b.error(e):_printer__WEBPACK_IMPORTED_MODULE_5__.b.error(e.stack))}}def(e,t){this.env.set(Object(_types__WEBPACK_IMPORTED_MODULE_4__.K)(e),t)}pushBinding(e){this.env.pushBinding(e)}popBinding(){this.env.popBinding()}var(e){return this.env.get(Object(_types__WEBPACK_IMPORTED_MODULE_4__.K)(e))}}},function(e,t,n){!function(e){var n={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function r(){var e=arguments[0],t=r.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=r.parse(e)),r.format.call(null,t[e],arguments)}r.format=function(e,t){var i,o,a,c,u,l,_,f,p=1,d=e.length,h="",b=[],O=!0,E="";for(o=0;o<d;o++)if("string"===(h=s(e[o])))b[b.length]=e[o];else if("array"===h){if((c=e[o])[2])for(i=t[p],a=0;a<c[2].length;a++){if(!i.hasOwnProperty(c[2][a]))throw new Error(r("[sprintf] property '%s' does not exist",c[2][a]));i=i[c[2][a]]}else i=c[1]?t[c[1]]:t[p++];if("function"==s(i)&&(i=i()),n.not_string.test(c[8])&&n.not_json.test(c[8])&&"number"!=s(i)&&isNaN(i))throw new TypeError(r("[sprintf] expecting number but found %s",s(i)));switch(n.number.test(c[8])&&(O=i>=0),c[8]){case"b":i=i.toString(2);break;case"c":i=String.fromCharCode(i);break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,c[6]?parseInt(c[6]):0);break;case"e":i=c[7]?i.toExponential(c[7]):i.toExponential();break;case"f":i=c[7]?parseFloat(i).toFixed(c[7]):parseFloat(i);break;case"g":i=c[7]?parseFloat(i).toPrecision(c[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=String(i))&&c[7]?i.substring(0,c[7]):i;break;case"u":i>>>=0;break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}n.json.test(c[8])?b[b.length]=i:(!n.number.test(c[8])||O&&!c[3]?E="":(E=O?"+":"-",i=i.toString().replace(n.sign,"")),l=c[4]?"0"===c[4]?"0":c[4].charAt(1):" ",_=c[6]-(E+i).length,u=c[6]&&_>0?(f=l,Array(_+1).join(f)):"",b[b.length]=c[5]?E+i+u:"0"===l?E+u+i:u+E+i)}return b.join("")},r.cache={},r.parse=function(e){for(var t=e,r=[],s=[],i=0;t;){if(null!==(r=n.text.exec(t)))s[s.length]=r[0];else if(null!==(r=n.modulo.exec(t)))s[s.length]="%";else{if(null===(r=n.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){i|=1;var o=[],a=r[2],c=[];if(null===(c=n.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o[o.length]=c[1];""!==(a=a.substring(c[0].length));)if(null!==(c=n.key_access.exec(a)))o[o.length]=c[1];else{if(null===(c=n.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");o[o.length]=c[1]}r[2]=o}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");s[s.length]=r}t=t.substring(r[0].length)}return s};function s(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}t.sprintf=r,t.vsprintf=function(e,t,n){return(n=(t||[]).slice(0)).splice(0,0,e),r.apply(null,n)}}("undefined"==typeof window||window)},,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(22),s=n.n(r);const i=new(n(23).a);if("undefined"!=typeof process&&2<process.argv.length){const e=process.argv[2];i.def("*ARGV*",process.argv.slice(3)),i.def("*filename*",e),i.REP(`(import "${e}")`),process.exit(0)}for(i.REP('(str "Glisp [" *host-language* "]")');;){const e=s.a.question("glisp> ");if(null==e)break;if(""!==e)try{i.REP(e)}catch(e){console.error("Error:",e)}}},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("os")}])}));